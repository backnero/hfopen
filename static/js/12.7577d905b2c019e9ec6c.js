webpackJsonp([12],{"7snD":function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n.healthy[data-v-ef5cea5e] {\n  width: 97%;\n  height: 100%;\n  margin-left: 1.5%;\n  padding: 0;\n}\n.healthy .keydata[data-v-ef5cea5e] {\n    font-size: 18px Medium;\n    margin-right: 16px;\n    line-height: 40px;\n}\n.healthy .flex-div[data-v-ef5cea5e] {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    width: 80em;\n    margin-bottom: 1.5%;\n}\n.healthy .flex-div .form-group[data-v-ef5cea5e] {\n      width: 32%;\n      margin-right: 2%;\n}\n.healthy .flex-div .form-group[data-v-ef5cea5e]:first-child {\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      -webkit-box-align: center;\n          -ms-flex-align: center;\n              align-items: center;\n      margin-top: 0;\n}\n.healthy .flex-div .form-group:first-child .line_span[data-v-ef5cea5e] {\n        display: inline-block;\n        width: 1em;\n        height: 1px;\n        background-color: #c0c4cc;\n        margin: 0 1em;\n}\n.healthy .flex-div .form-group[data-v-ef5cea5e]:last-child {\n      margin-right: 0;\n}\n.healthy .flex-div div:first-child .inputtext[data-v-ef5cea5e] {\n      width: 10em;\n}\n.healthy .flex-div div .inputtext[data-v-ef5cea5e] {\n      width: 23em;\n}\n.healthy .flex-div-bottom[data-v-ef5cea5e] {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -ms-flex-wrap: wrap;\n        flex-wrap: wrap;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    height: 3em;\n    width: 80em;\n    margin-bottom: 2%;\n    position: relative;\n}\n.healthy .flex-div-bottom/deep/ .el-radio + .el-radio[data-v-ef5cea5e] {\n      margin-left: 10px;\n}\n.healthy .flex-div-bottom .form-group[data-v-ef5cea5e] {\n      margin-right: 2%;\n}\n.healthy .flex-div-bottom .form-group[data-v-ef5cea5e]:first-child {\n      width: 18%;\n}\n.healthy .flex-div-bottom .form-group[data-v-ef5cea5e]:nth-of-type(2) {\n      width: 25%;\n}\n.healthy .flex-div-bottom .form-group[data-v-ef5cea5e]:last-child {\n      width: 25%;\n}\n.healthy .flex-div-bottom .healthy_bottom[data-v-ef5cea5e] {\n      position: absolute;\n      width: 100px;\n      right: 0.27%;\n}\n.healthy .grid-content[data-v-ef5cea5e] {\n    width: 100%;\n}\n.healthy .app-container[data-v-ef5cea5e] {\n    width: 90%;\n    padding: 20px 0;\n}\n.healthy .app-container .flex-temp[data-v-ef5cea5e] {\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      -ms-flex-wrap: wrap;\n          flex-wrap: wrap;\n      width: 95em;\n}\n.healthy .app-container .form-group[data-v-ef5cea5e] {\n      width: 20%;\n      margin-top: 0;\n      margin-right: 6.9%;\n      margin-top: 1%;\n}\n.healthy .app-container .form-group .inputtextx[data-v-ef5cea5e] {\n        margin-left: 4%;\n        width: 50%;\n}\n.healthy .app-container .form-group[data-v-ef5cea5e] .el-select > .el-input {\n        display: block;\n        width: 200px;\n}\n.healthy .app-container .form-groups[data-v-ef5cea5e] {\n      width: 6%;\n      margin-top: 0;\n      margin-right: 2%;\n      margin-top: 1%;\n}\n.healthy .app-container .form-group[data-v-ef5cea5e]:last-child {\n      width: 38.2%;\n      margin-right: 0;\n}\n.healthy .app-container .btn-primaryx[data-v-ef5cea5e] {\n      margin-left: 6.5%;\n      width: 100px;\n}\n.healthy .fonttype[data-v-ef5cea5e] {\n    font: 16px Medium;\n    color: #303133;\n    margin-right: 16px;\n}\n.healthy .inputtext[data-v-ef5cea5e] {\n    width: 160px;\n}\n.healthy .form-group-fleximg[data-v-ef5cea5e] {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -ms-flex-wrap: wrap;\n        flex-wrap: wrap;\n}\n.healthy .block_page[data-v-ef5cea5e] {\n    margin-top: 25px;\n    margin-bottom: 10px;\n    text-align: right;\n}\n.healthy .renwu-type[data-v-ef5cea5e] {\n    margin-bottom: 20px;\n    width: 90%;\n}\n.el-table[data-v-ef5cea5e] {\n  width: 100%;\n  border: 1px solid #ebeef5;\n}\n.el-table[data-v-ef5cea5e] .cell {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-pack: center;\n        -ms-flex-pack: center;\n            justify-content: center;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    -ms-flex-wrap: wrap;\n        flex-wrap: wrap;\n}\n.el-table[data-v-ef5cea5e] .cell /deep/ .el-tag {\n      margin: 2px 4px;\n      border: none;\n}\n.el-table[data-v-ef5cea5e] .cell /deep/ .el-button {\n      border: none;\n}\n.el-table[data-v-ef5cea5e] th {\n    background-color: #ecf5ff;\n    color: #333333;\n    padding: 12px 0;\n    border: none;\n}\n.el-table[data-v-ef5cea5e] .el-table__header-wrapper {\n    background-color: #ecf5ff;\n}\n.el-table[data-v-ef5cea5e] td {\n    border: none;\n    border-bottom: 1px solid #ebeef5;\n    padding: 6px 0;\n}\n",""])},"X+ce":function(e,t,a){"use strict";t.b=function(e){return Object(l.a)({url:"/community/template",method:"get",params:e})},t.a=function(e){return Object(l.a)({url:"/community/queue/go",method:"post",data:{u_id:e.u_id,taskName:e.taskName,template_id:e.template_id,keyword:e.keyword,backUrl:e.backUrl,condition:e.condition}})},t.c=function(e){return Object(l.a)({url:"/community/queue/result",method:"get",params:e})};var l=a("vLgD")},a2JG:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("mvHQ"),n=a.n(l),i=a("pFYg"),r=a.n(i),s=a("X+ce"),o={data:function(){return{keyword:{keyword1:"",keyword2:"",keyword3:"",keyword4:"",keyword5:"",keyword6:"",keyword7:"",keyword8:""},loading:!0,multipleSelection:[],currentPage3:1,listQuery:{page:1,size:5,age_min:"",age_max:"",address:"",xb:"",nl:"",tx:"",extra_label:""},pagelist:"",usertableData:[],templateDatas:[],templateData:{u_id:"",taskName:"",template_id:"",keyword:"",backUrl:"",condition:""},condition:"",temHistorylist:[],finishlist:[{id:0,name:"未完成"},{id:1,name:"完成"}],uid:[],keyworddata:[],val:"",contentarr:[],m:[]}},created:function(){this.fetchData(),this.gettemHistory()},methods:{handleSizeChange:function(e){this.listQuery.size=e,this.fetchData()},handleCurrentChange:function(e){this.listQuery.page=e,this.fetchData()},query:function(){this.listQuery.page=1,this.listQuery.size=5,this.fetchData()},fetchData:function(){var e=this;Object(s.b)(this.listQuery).then(function(t){e.pagelist=t.meta,e.usertableData=t.data.users,e.templateDatas=t.data.template,e.loading=!1})},changeContent:function(){for(var e in this.templateDatas)if(this.templateDatas[e].template_id===this.templateData.template_id){var t=this.templateDatas[e].content.replace(/({{[^{]*})/g,",");this.contentarr=t.split(","),console.log(this.contentarr.pop())}},handleSelection:function(e){for(var t in this.multipleSelection=e,this.uid.splice(0,this.uid.length),this.multipleSelection)this.uid.push(this.multipleSelection[t].id);this.templateData.u_id=this.uid},gettemHistory:function(){var e=this;Object(s.c)(this.listQuery).then(function(t){e.temHistorylist=t.data,e.updateTem()})},updateTem:function(){for(var e in this.temHistorylist){for(var t in this.finishlist)this.temHistorylist[e].is_finish==this.finishlist[t].id&&(this.temHistorylist[e].is_finish=this.finishlist[t].name);this.temHistorylist[e].condition_data=this.gototheair(this.temHistorylist[e].condition_data.split(","))}},gototheair:function(e){for(var t in e)""!=e[t]&&null!=e[t]&&void 0!=r()(e[t])||e.splice(t,1);return e},addTemplate:function(){var e=this;for(var t in this.keyword)this.keyworddata.push(this.keyword[t]);var a=this,l=this.copy(this.templateData);l.condition=n()(this.copy(this.listQuery)),l.u_id=this.templateData.u_id,l.keyword=this.keyworddata,Object(s.a)(l).then(function(t){1==t.status_code&&(e.$message({message:"任务创建成功，请查看任务列表是否发送成功！",type:"success"}),a.gettemHistory(),a.$router.push("/example/healthy"),a.fetchData())})},copy:function(e){var t={};for(var a in e)t[a]="object"===r()(e[a])?this.copy(e[a]):e[a];return t}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"healthy"},[a("div",{staticClass:"flex-div"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"fonttype"},[e._v("年龄区间")]),e._v(" "),a("el-input",{staticClass:"inputtext",attrs:{placeholder:"请输入最小值"},model:{value:e.listQuery.age_min,callback:function(t){e.$set(e.listQuery,"age_min",t)},expression:"listQuery.age_min"}}),e._v(" "),a("span",{staticClass:"line_span"}),e._v(" "),a("el-input",{staticClass:"inputtext",attrs:{placeholder:"请输入最大值"},model:{value:e.listQuery.age_max,callback:function(t){e.$set(e.listQuery,"age_max",t)},expression:"listQuery.age_max"}})],1),e._v(" "),a("div",{staticClass:"form-group"},[a("label",{staticClass:"fonttype"},[e._v("用户住址")]),e._v(" "),a("el-input",{staticClass:"inputtext",attrs:{placeholder:"请输入住址"},model:{value:e.listQuery.address,callback:function(t){e.$set(e.listQuery,"address",t)},expression:"listQuery.address"}})],1),e._v(" "),a("div",{staticClass:"form-group"},[a("label",{staticClass:"fonttype"},[e._v("健康标签")]),e._v(" "),a("el-input",{staticClass:"inputtext",attrs:{placeholder:"请输入标签"},model:{value:e.listQuery.extra_label,callback:function(t){e.$set(e.listQuery,"extra_label",t)},expression:"listQuery.extra_label"}})],1)]),e._v(" "),a("div",{staticClass:"flex-div-bottom"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"fonttype"},[e._v("性别:")]),e._v(" "),a("el-radio",{model:{value:e.listQuery.xb,callback:function(t){e.$set(e.listQuery,"xb",t)},expression:"listQuery.xb"}},[e._v("不限")]),e._v(" "),a("el-radio",{attrs:{label:"1"},model:{value:e.listQuery.xb,callback:function(t){e.$set(e.listQuery,"xb",t)},expression:"listQuery.xb"}},[e._v("男")]),e._v(" "),a("el-radio",{attrs:{label:"2"},model:{value:e.listQuery.xb,callback:function(t){e.$set(e.listQuery,"xb",t)},expression:"listQuery.xb"}},[e._v("女")])],1),e._v(" "),a("div",{staticClass:"form-group"},[a("label",{staticClass:"fonttype"},[e._v("年龄:")]),e._v(" "),a("el-radio",{model:{value:e.listQuery.nl,callback:function(t){e.$set(e.listQuery,"nl",t)},expression:"listQuery.nl"}},[e._v("不限")]),e._v(" "),a("el-radio",{attrs:{label:"3"},model:{value:e.listQuery.nl,callback:function(t){e.$set(e.listQuery,"nl",t)},expression:"listQuery.nl"}},[e._v("青年")]),e._v(" "),a("el-radio",{attrs:{label:"4"},model:{value:e.listQuery.nl,callback:function(t){e.$set(e.listQuery,"nl",t)},expression:"listQuery.nl"}},[e._v("中年")]),e._v(" "),a("el-radio",{attrs:{label:"5"},model:{value:e.listQuery.nl,callback:function(t){e.$set(e.listQuery,"nl",t)},expression:"listQuery.nl"}},[e._v("老年")])],1),e._v(" "),a("div",{staticClass:"form-group"},[a("label",{staticClass:"fonttype"},[e._v("体型:")]),e._v(" "),a("el-radio",{model:{value:e.listQuery.tx,callback:function(t){e.$set(e.listQuery,"tx",t)},expression:"listQuery.tx"}},[e._v("不限")]),e._v(" "),a("el-radio",{attrs:{label:"6"},model:{value:e.listQuery.tx,callback:function(t){e.$set(e.listQuery,"tx",t)},expression:"listQuery.tx"}},[e._v("瘦")]),e._v(" "),a("el-radio",{attrs:{label:"7"},model:{value:e.listQuery.tx,callback:function(t){e.$set(e.listQuery,"tx",t)},expression:"listQuery.tx"}},[e._v("正常")]),e._v(" "),a("el-radio",{attrs:{label:"8"},model:{value:e.listQuery.tx,callback:function(t){e.$set(e.listQuery,"tx",t)},expression:"listQuery.tx"}},[e._v("胖")])],1),e._v(" "),a("el-button",{staticClass:"healthy_bottom",attrs:{type:"primary",plain:"",icon:"el-icon-search"},on:{click:e.query}},[e._v("查询")])],1),e._v(" "),a("el-row",[a("div",{staticClass:"grid-content bg-purple"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.usertableData,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""},on:{select:e.handleSelection,"select-all":e.handleSelection}},[a("el-table-column",{attrs:{type:"selection",prop:" ",width:"160",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"用户ID",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"nickName",label:"微信昵称",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"微信头像",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{staticClass:"image-avatarUrl",staticStyle:{width:"50px",height:"50px","border-radius":"50%"},attrs:{src:e.row.avatarUrl,onerror:"this.src='../static/image/aaa.png'"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"can",label:"可发送次数",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"send",label:"已发送次数",align:"center"}})],1)],1)]),e._v(" "),a("div",{staticClass:"block_page"},[a("el-pagination",{attrs:{"current-page":e.currentPage3,"page-size":5,layout:"prev, pager, next, jumper",total:e.pagelist.count},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage3=t}}})],1),e._v(" "),a("div",{staticClass:"app-container"},[a("h4",[e._v("发送模板消息")]),e._v(" "),a("div",{staticClass:"flex-temp"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"fonttype"},[e._v("任务名称")]),e._v(" "),a("el-input",{staticClass:"inputtextx",attrs:{placeholder:"请输入任务名称"},model:{value:e.templateData.taskName,callback:function(t){e.$set(e.templateData,"taskName",t)},expression:"templateData.taskName"}})],1),e._v(" "),a("div",{staticClass:"form-group"},[a("label",{staticClass:"fonttype"},[e._v("模板ID")]),e._v(" "),[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.templateData.template_id,callback:function(t){e.$set(e.templateData,"template_id",t)},expression:"templateData.template_id"}},e._l(e.templateDatas,function(t){return a("el-option",{key:t.template_id,attrs:{label:t.title,value:t.template_id},nativeOn:{click:function(t){e.changeContent(t)}}})}))]],2),e._v(" "),a("div"),e._v(" "),e._m(0),e._v(" "),e.contentarr[0]?a("div",{staticClass:"form-group"},[a("label",{staticClass:"fonttype"},[e._v(e._s(e.contentarr[0]))]),e._v(" "),e.contentarr[0]?a("el-input",{staticClass:"inputtextx",attrs:{placeholder:"请输入内容"},model:{value:e.keyword.keyword1,callback:function(t){e.$set(e.keyword,"keyword1",t)},expression:"keyword.keyword1"}}):e._e()],1):e._e(),e._v(" "),e.contentarr[1]?a("div",{staticClass:"form-group"},[a("label",{staticClass:"fonttype"},[e._v(e._s(e.contentarr[1]))]),e._v(" "),e.contentarr[1]?a("el-input",{staticClass:"inputtextx",attrs:{placeholder:"请输入内容"},model:{value:e.keyword.keyword2,callback:function(t){e.$set(e.keyword,"keyword2",t)},expression:"keyword.keyword2"}}):e._e()],1):e._e(),e._v(" "),e.contentarr[2]?a("div",{staticClass:"form-group"},[a("label",{staticClass:"fonttype"},[e._v(e._s(e.contentarr[2]))]),e._v(" "),e.contentarr[2]?a("el-input",{staticClass:"inputtextx",attrs:{placeholder:"请输入内容"},model:{value:e.keyword.keyword3,callback:function(t){e.$set(e.keyword,"keyword3",t)},expression:"keyword.keyword3"}}):e._e()],1):e._e(),e._v(" "),e.contentarr[3]?a("div",{staticClass:"form-group"},[a("label",{staticClass:"fonttype"},[e._v(e._s(e.contentarr[3]))]),e._v(" "),e.contentarr[3]?a("el-input",{staticClass:"inputtextx",attrs:{placeholder:"请输入内容"},model:{value:e.keyword.keyword4,callback:function(t){e.$set(e.keyword,"keyword4",t)},expression:"keyword.keyword4"}}):e._e()],1):e._e(),e._v(" "),e.contentarr[4]?a("div",{staticClass:"form-group"},[a("label",{staticClass:"fonttype"},[e._v(e._s(e.contentarr[4]))]),e._v(" "),e.contentarr[4]?a("el-input",{staticClass:"inputtextx",attrs:{placeholder:"请输入内容"},model:{value:e.keyword.keyword5,callback:function(t){e.$set(e.keyword,"keyword5",t)},expression:"keyword.keyword5"}}):e._e()],1):e._e(),e._v(" "),e.contentarr[5]?a("div",{staticClass:"form-group"},[a("label",{staticClass:"fonttype"},[e._v(e._s(e.contentarr[5]))]),e._v(" "),e.contentarr[5]?a("el-input",{staticClass:"inputtextx",attrs:{placeholder:"请输入内容"},model:{value:e.keyword.keyword6,callback:function(t){e.$set(e.keyword,"keyword6",t)},expression:"keyword.keyword6"}}):e._e()],1):e._e(),e._v(" "),e.contentarr[6]?a("div",{staticClass:"form-group"},[a("label",{staticClass:"fonttype"},[e._v(e._s(e.contentarr[6]))]),e._v(" "),e.contentarr[6]?a("el-input",{staticClass:"inputtextx",attrs:{placeholder:"请输入内容"},model:{value:e.keyword.keyword7,callback:function(t){e.$set(e.keyword,"keyword7",t)},expression:"keyword.keyword7"}}):e._e()],1):e._e(),e._v(" "),e.contentarr[7]?a("div",{staticClass:"form-group"},[a("label",{staticClass:"fonttype"},[e._v(e._s(e.contentarr[7]))]),e._v(" "),e.contentarr[7]?a("el-input",{staticClass:"inputtextx",attrs:{placeholder:"请输入内容"},model:{value:e.keyword.keyword8,callback:function(t){e.$set(e.keyword,"keyword8",t)},expression:"keyword.keyword8"}}):e._e()],1):e._e(),e._v(" "),a("div",{staticClass:"form-group"},[a("label",{staticClass:"fonttype"},[e._v("点击跳转地址")]),e._v(" "),a("el-input",{staticClass:"inputtextx",attrs:{placeholder:"请输入跳转地址"},model:{value:e.templateData.backUrl,callback:function(t){e.$set(e.templateData,"backUrl",t)},expression:"templateData.backUrl"}}),e._v(" "),a("el-button",{staticClass:"btn-primaryx",attrs:{type:"primary",plain:""},on:{click:e.addTemplate}},[e._v("完成")])],1)])]),e._v(" "),a("div",{staticClass:"renwu-type"},[a("h4",[e._v("任务列表")]),e._v(" "),a("el-table",{attrs:{data:e.temHistorylist,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{prop:"taskName",label:"任务名称",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"count",label:"任务总计",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"任务筛选条件",align:"center",width:"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.condition_data,function(t,l){return a("span",{key:t},[e._v("\n            "+e._s(t)+"\n            "),0==l&&""!=t?a("span",[e._v("-")]):e._e()])})}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"success",label:"任务成功数量",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"fail",label:"任务失败数量",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"wait",label:"任务剩余数量",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"is_finish",label:"任务是否完成",align:"center"}})],1)],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"form-groups"},[t("label",{staticClass:"keydata"},[this._v("关键字：")])])}]};var d=a("VU/8")(o,c,!1,function(e){a("zGTX")},"data-v-ef5cea5e",null);t.default=d.exports},zGTX:function(e,t,a){var l=a("7snD");"string"==typeof l&&(l=[[e.i,l,""]]),l.locals&&(e.exports=l.locals);a("rjj0")("4dbeb73c",l,!0)}});